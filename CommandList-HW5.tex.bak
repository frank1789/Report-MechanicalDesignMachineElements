\begin{multicols}{2}
\begin{lstlisting}[language=APDL, style=apdl-modified]
!*********************
! PROBLEM HOMEWORK 4 *
!*********************

FINISH
/CLEAR,START,NEW
/FILNAME,Homework4
! >>> PARAMETERS MODEL <<<
*SET,leng_v_pipe,500
*SET,diameter_v_pipe,100
*SET,thick_v_pipe,2
*SET,leng_h_pipe,1000
*SET,diameter_h_pipe,200
*SET,thick_h_pipe,4
*SET,alpha,90
*SET,EPS,1E-3
*SET,n_div_area,3

! >>> PROPERTIES MATERIAL <<<
*SET,E_Young,210000
*SET,ni,0.3

! >>> LOAD <<<
*SET,pressure,1

! >>> PRE PROCESSING <<<
/PREP7
ET,1,SHELL181
KEYOPT,1,8,2
SECTYPE,1,shell
SECDATA,thick_h_pipe
MP,EX,1,E_Young
MP,PRXY,1,ni

ET,2,SHELL181
KEYOPT,2,8,2
SECTYPE,2,shell
SECDATA,thick_v_pipe
MP,EX,2,E_Young
MP,PRXY,2,ni

TYPE,1
SECNUM,1
MAT,1
SAVE

! >>> DEFINE RF CYLINDRICAL <<<
CLOCAL,100,CYLIN,0,diameter_h_pipe/2-leng_v_pipe/10,0,,-alpha
CSYS,0
CLOCAL,200,CYLIN,0,0,0,,,alpha

!***VERTICAL PIPE
CSYS,100
K,1,diameter_v_pipe/2,0,0
K,2,diameter_v_pipe/2,0,leng_v_pipe+leng_v_pipe/10
K,3,0,0,0
K,4,0,0,leng_v_pipe
L,1,2
!***HORIZZONTAL PIPE
CSYS,200
K,5,diameter_h_pipe/2,-alpha,0
K,6,diameter_h_pipe/2,-alpha,leng_h_pipe/2
K,7,0,0 
K,8,0,0,leng_h_pipe/2
L,5,6
!***GEN AREA H PIPE
AROTAT,2,,,,,,8,7,-2*alpha
!***GEN AREA V PIPE
CSYS,100
AROTAT,1,,,,,,3,4,alpha
SAVE

APTN,2,3
ADELE,4,5
LDELE,10
LDELE,15
LDELE,16
SAVE

CSYS,0
WPOFFS,-50,100
WPROTA,,250
ASBW,7
WPOFFS,50,-10
WPROTA,,-250
WPROTA,,,alpha
WPOFFS,,,64.3
ASBW,3
WPROTA,,alpha
WPOFFS,,,-10
ASBW,6
SAVE

! >>> MESHING <<<
LCCAT,16,21
LCCAT,15,21
AESIZE,ALL,n_div_area

!***HORIZZONTAL PIPE
ESYS,200
TYPE,1
SECNUM,1
MSHKEY,1
MSHAPE,0,2D
AMESH,4
AMESH,5
AMESH,2
AMESH,1
SAVE

!***VERTICAL PIPE
ESYS,100
SAVE
TYPE,2
SECNUM,2
SAVE
MSHKEY,1
MSHAPE,0,2D
AMESH,7
AMESH,3
SAVE

! >>> VERIFY THE NORMAL VERSOR <<<
EPLOT
/PSYMB,ESYS,1
 
! >>> SOLUTION <<<
SAVE
SFE,ALL,,PRES,,pressure
/PBC,ALL,,1
NSEL,S,LOC,x,-EPS,+EPS 
DSYM,SYMM,x
NSEL,S,LOC,z,-EPS,+EPS 
DSYM,SYMM,z
KSEL,S,KP,,6
NSLK,S
DSYM,SYMM,y 
ALLSEL,ALL
/SOLU
SOLVE
FINISH

! >>> POSTPROCESSING <<<
/POST1
/ESHAPE,1
PLDISP,1

SHELL,MID
RSYS,SOLU
PLNSOL,S,x
PLNSOL,S,y
PRNSOL,S,comp

!*********************
! PROBLEM HOMEWORK 5 *
!*********************

FINISH
/CLEAR, START, NEW
/TITLE, HOMEWORK 5
/FILNAME,HOMEWORK5,1
! >>> PARAMETERS MODEL <<<
*DO,k,0,150,25
*SET,leng_v_pipe,490
*SET,diameter_v_pipe,100
*SET,thick_v_pipe, 2
*SET,leng_h_pipe,1000
*SET,diameter_h_pipe,200
*SET,thick_h_pipe,4
*SET,fillet,10
*SET,alpha,90
*SET,EPS,1E-3
*SET,e_lenght,1
!***PARAMETERS CUT BOUNDARES
*SET,vCutBun,35+(k/25*5))
*SET,rCutBun,65+(k/25*5)
*SET,hCutBun,(diameter_h_pipe/2)*1.1

! >>> PROPERTIES MATERIAL <<<
*SET,E_Young, 210000
*SET,ni,0.3

! >>> LOAD <<<
*SET,pressure, 1

! >>> PRE PROCESSING <<<
/PREP7
ET,1,SOLID186
MP,EX,1,E_Young
MP,PRXY,1,ni
TYPE,1
SECNUM,1
MAT,1
SAVE
\end{lstlisting}
\end{multicols}

\begin{lstlisting}[language=APDL, style=apdl-modified]
! >>> DEFINE RF CYLINDRICAL <<<
CLOCAL,100,CYLIN,0,diameter_h_pipe/2-thick_h_pipe/2,0,,-alpha
CSYS,0
CLOCAL,200,CYLIN,0,0,0,,,alpha

!***VERTICAL PIPE
CSYS,100
WPCSYS,,100
WPOFFS,0,0,-50
CYL4,0,0,(diameter_v_pipe/2)-thick_v_pipe,0,diameter_v_pipe/2,alpha,leng_v_pipe*(1+(109/490))
!***HORIZZONTAL PIPE
CSYS,200
WPCSYS,,200
CYL4,0,0,(diameter_h_pipe/2)-thick_h_pipe,-alpha,diameter_h_pipe/2,alpha,leng_h_pipe/2

VPTN,1,2
VDELE,3,4,,1
AFILLT,33,23,fillet
AL,2,14,33
AL,1,34,16
VA,5,3,6,12,7
SAVE

!***CUT VERTICAL PIPE
WPCSYS,,100
WPOFFS,0,0,vCutBun
VSBW,5,SEPO,DELETE
!***CUT HORIZZONTAL PIPE
CSYS,100
K,100,rCutBun,-(hCutBun-diameter_h_pipe/2),-hCutBun
K,101,rCutBun,hCutBun,-hCutBun
L,100,101
K,102,0,0,-diameter_h_pipe/2
K,103,0,0,diameter_h_pipe/2
L,102,103
ADRAG,5,,,,,,6
VSBA,7,2
!***JOIN SUBMODEL
VADD,3,1,6,4
VSEL,U,VOLU,,7
VDELE,ALL,,,1
ALLSEL,ALL
!***JOINS AREAS 
AADD,26,5,31,34
AADD,41,6,32,36
SAVE
\end{lstlisting}
\begin{multicols}{2}
\begin{lstlisting}[language=APDL, style=apdl-modified]
! >>> MESHING <<<
CSYS,0
MSHAPE,1,3D
MSHKEY,0
ESIZE,e_lenght
VMESH,ALL
SAVE
/VIEW,1,,,-1
/ANG,1  
/REP,FAST 

! >>> SHELL TO SOLID SUBMODELS <<<
ASEL,S,AREA,,23,25,2
NSLA,S
NWRITE,subHW5,node,,0
ALLSEL,ALL
SAVE
RESUME,'homework4','db'
/POST1
FILE,HOMEWORK4,rst 
SET,first      
cbdof,subHW5,node,,DHW5,cbdo,,,,1

RESUME,HOMEWORK5,db
/PREP7
/INPUT,DHW5,cbdo
/INPUT,DHW5,cbdo,,:cb1

! >>> SOLUTION <<<
SAVE
NSEL,S,LOC,x,-eps,+eps
DSYM,SYMM,x
NSEL,S,LOC,z,-eps,+eps
DSYM,SYMM,z
ASEL,S,AREA,,20,24,2
ASEL,A,AREA,,1
NSLA,S
SF,ALL,PRES,pressure
ALLSEL,ALL
/SOLU
SOLVE
FINISH

/VIEW,1,,,-1
/ANG,1  
/REP,FAST 
! >>> POSTPROCESSING <<<
/POST1
PLDISP,1
PLNSOL,S,Y
PLNSOL,S,X
PRNSOL,S,COMP

PLNSOL,S,X
*GET,stressmax,PLNSOL,,max
*CFOPEN,'Stress','txt',,append
 *VWRITE,k/25,vCutBun,rCutBun,stressmax
  (F20.10,F20.10,F20.10,F20.10)
*cfclos

PLNSOL,S,eqv
*GET,stressEQV,PLNSOL,,max
*CFOPEN,'stressEQV','txt',,append
 *VWRITE,k/25,vCutBun,rCutBun,stressEQV
  (F20.10,F20.10,F20.10,F20.10)
*CFCLOS

LSEL,S,LINE,,8  
LSEL,A,LINE,,2  
LSEL,A,LINE,,28
NSLL,S,1
FLST,2,263,1
FITEM,2,1   
FITEM,2,56760   
FITEM,2,56761   
FITEM,2,56762   
FITEM,2,56763   
FITEM,2,56764   
FITEM,2,56765   
FITEM,2,56766   
FITEM,2,56767   
FITEM,2,56768   
FITEM,2,56769   
FITEM,2,56771   
FITEM,2,56771   
FITEM,2,56770   
FITEM,2,56771   
FITEM,2,56771   
FITEM,2,56771   
FITEM,2,56772   
FITEM,2,56773   
FITEM,2,56774   
FITEM,2,56775   
FITEM,2,56776   
FITEM,2,56777   
FITEM,2,56779   
FITEM,2,56779   
FITEM,2,56778   
FITEM,2,56779   
FITEM,2,56780   
FITEM,2,56781   
FITEM,2,56782   
FITEM,2,56783   
FITEM,2,56784   
FITEM,2,56785   
FITEM,2,56787   
FITEM,2,56786   
FITEM,2,56787   
FITEM,2,56786   
FITEM,2,56786   
FITEM,2,56787   
FITEM,2,56788   
FITEM,2,56789   
FITEM,2,56790   
FITEM,2,56791   
FITEM,2,56792   
FITEM,2,56793   
FITEM,2,56794   
FITEM,2,56795   
FITEM,2,56796   
FITEM,2,56797   
FITEM,2,56798   
FITEM,2,56799   
FITEM,2,56800   
FITEM,2,56801   
FITEM,2,56802   
FITEM,2,56803   
FITEM,2,56804   
FITEM,2,56805   
FITEM,2,56806   
FITEM,2,56807   
FITEM,2,56808   
FITEM,2,56809   
FITEM,2,56810   
FITEM,2,56811   
FITEM,2,56812   
FITEM,2,56813   
FITEM,2,56814   
FITEM,2,56815   
FITEM,2,56816   
FITEM,2,56817   
FITEM,2,56818   
FITEM,2,56819   
FITEM,2,56821   
FITEM,2,56821   
FITEM,2,56820   
FITEM,2,56821   
FITEM,2,56822   
FITEM,2,56823   
FITEM,2,56824   
FITEM,2,56825   
FITEM,2,56826   
FITEM,2,56827   
FITEM,2,56828   
FITEM,2,56829   
FITEM,2,56830   
FITEM,2,56831   
FITEM,2,56832   
FITEM,2,56833   
FITEM,2,56834   
FITEM,2,56835   
FITEM,2,56836   
FITEM,2,56837   
FITEM,2,56838   
FITEM,2,56839   
FITEM,2,56840   
FITEM,2,56841   
FITEM,2,56842   
FITEM,2,56843   
FITEM,2,56845   
FITEM,2,56845   
FITEM,2,56844   
FITEM,2,56845   
FITEM,2,56846   
FITEM,2,56847   
FITEM,2,56848   
FITEM,2,51894   
FITEM,2,51925   
FITEM,2,51924   
FITEM,2,51923   
FITEM,2,51922   
FITEM,2,51921   
FITEM,2,51919   
FITEM,2,51919   
FITEM,2,51920   
FITEM,2,51919   
FITEM,2,51918   
FITEM,2,51917   
FITEM,2,51916   
FITEM,2,51914   
FITEM,2,51915   
FITEM,2,51914   
FITEM,2,51914   
FITEM,2,51914   
FITEM,2,51915   
FITEM,2,51915   
FITEM,2,51913   
FITEM,2,51914   
FITEM,2,51913   
FITEM,2,51914   
FITEM,2,51914   
FITEM,2,51913   
FITEM,2,51912   
FITEM,2,51911   
FITEM,2,51910   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51907   
FITEM,2,51907   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51907   
FITEM,2,51907   
FITEM,2,51909   
FITEM,2,51907   
FITEM,2,51909   
FITEM,2,51907   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51909   
FITEM,2,51907   
FITEM,2,51907   
FITEM,2,51907   
FITEM,2,51907   
FITEM,2,51908   
FITEM,2,51907   
FITEM,2,51906   
FITEM,2,51905   
FITEM,2,51904   
FITEM,2,51903   
FITEM,2,51902   
FITEM,2,51902   
FITEM,2,51902   
FITEM,2,51901   
FITEM,2,51900   
FITEM,2,51899   
FITEM,2,51898   
FITEM,2,51897   
FITEM,2,51896   
FITEM,2,51895   
FITEM,2,30418   
FITEM,2,30660   
FITEM,2,30659   
FITEM,2,30658   
FITEM,2,30657   
FITEM,2,30656   
FITEM,2,30655   
FITEM,2,30654   
FITEM,2,30653   
FITEM,2,30652   
FITEM,2,30651   
FITEM,2,30650   
FITEM,2,30649   
FITEM,2,30648   
FITEM,2,30647   
FITEM,2,30645   
FITEM,2,30645   
FITEM,2,30646   
FITEM,2,30645   
FITEM,2,30645   
FITEM,2,30645   
FITEM,2,30644   
FITEM,2,30643   
FITEM,2,30642   
FITEM,2,30641   
FITEM,2,30640   
FITEM,2,30639   
FITEM,2,30638   
FITEM,2,30636   
FITEM,2,30636   
FITEM,2,30637   
FITEM,2,30635   
FITEM,2,30635   
FITEM,2,30636   
FITEM,2,30634   
FITEM,2,30636   
FITEM,2,30633   
FITEM,2,30634   
FITEM,2,30633   
FITEM,2,30636   
FITEM,2,30635   
FITEM,2,30634   
FITEM,2,30633   
FITEM,2,30632   
FITEM,2,30631   
FITEM,2,30630   
FITEM,2,30629   
FITEM,2,30627   
FITEM,2,30627   
FITEM,2,30628   
FITEM,2,30627   
FITEM,2,30626   
FITEM,2,30625   
FITEM,2,30623   
FITEM,2,30623   
FITEM,2,30624   
FITEM,2,30622   
FITEM,2,30622   
FITEM,2,30623   
FITEM,2,30622   
FITEM,2,30621   
FITEM,2,30620   
FITEM,2,30618   
FITEM,2,30618   
FITEM,2,30620   
FITEM,2,30620   
FITEM,2,30619   
FITEM,2,30618   
FITEM,2,30616   
FITEM,2,30616   
FITEM,2,30618   
FITEM,2,30618   
FITEM,2,30618   
FITEM,2,30618   
FITEM,2,30617   
FITEM,2,30616   
FITEM,2,30615   
FITEM,2,30614   
FITEM,2,30613   
FITEM,2,30612   
FITEM,2,30611   
FITEM,2,30610   
FITEM,2,30609   
FITEM,2,30608   
FITEM,2,30607   
FITEM,2,30606   
FITEM,2,30605   
FITEM,2,30604   
FITEM,2,30603   
FITEM,2,30602   
FITEM,2,1126 
PATH,STREQV,263,30,20,  
PPATH,P51X,1
PATH,STAT     
AVPRIN,0, ,  
PDEF,VONMISES,S,EQV,AVG 
/PBC,PATH, ,1   
PLPATH,VONMISES
FINISH
/CLEAR,START
*ENDDO
\end{lstlisting}
\end{multicols}